<!-- checkout.html -->
{% extends "base.html" %}
{% block description %}Checkout{% endblock %}
{% block title %}Checkout{% endblock %}
{% block navtitle %}Checkout{% endblock %}
{% block content %}
<!DOCTYPE html>
<html>
<head>
    <title>{{ title }}</title>
</head>
<body>
    <div style="padding:50px;">
    <!-- Credit card form -->
<section>
    <div class="row">
      <div class="col-md-8 mb-4">
        <div class="card mb-4">
          <div class="card-header py-3" style="background-color: #a17a83;">
            <h5 class="mb-0" style="color:white">Biling Details</h5>
          </div>
          <div class="card-body" style="background-color:rgb(248, 246, 246)">
            <form action="/confirmation" method="post">
              <!-- 2 column grid layout with text inputs for the first and last names -->
              <div class="row mb-4">
                <div class="col">
                  <div class="form-outline">
                    <input type="text" id="form6Example1" class="form-control" placeholder="First Name" required/>
                    <label class="form-label" for="form6Example1">First name</label>
                  </div>
                </div>
                <div class="col">
                  <div class="form-outline">
                    <input type="text" id="form6Example2" class="form-control" placeholder="Last Name" required/>
                    <label class="form-label" for="form6Example2">Last name</label>
                  </div>
                </div>
              </div>
  
              <!-- Text input -->
              <div class="row mb-4">
                <div class="col">
                  <div class="form-outline">
                    <input type="text" id="form6Example1" class="form-control" required/>
                    <label class="form-label" for="form6Example1">Address</label>
                  </div>
                </div>
                <div class="col">
                  <div class="form-outline">
                    <input type="text" id="form6Example2" class="form-control" required/>
                    <label class="form-label" for="form6Example2">Zip Code</label>
                  </div>
                </div>
              </div>
  
              <!-- Text input -->
              <div class="row mb-4">
                <div class="col">
                  <div class="form-outline">
                    <input type="text" id="form6Example1" class="form-control" required />
                    <label class="form-label" for="form6Example1">City</label>
                  </div>
                </div>
                <div class="col">
                  <div class="form-outline">
                    <input type="text" id="form6Example2" class="form-control" required/>
                    <label class="form-label" for="form6Example2">State</label>
                  </div>
                </div>
              </div>
  
              <!-- Email input -->
              <div class="form-outline mb-4">
                <input type="email" id="form6Example5" class="form-control" placeholder="email@example.com" required/>
                <label class="form-label" for="form6Example5">Email</label>
              </div>
  
              <hr class="my-4" />
    
              <h5 class="mb-4">Payment</h5>
  
              <div class="form-check mb-4">
                <input class="form-check-input" type="radio" name="flexRadioDefault" id="checkoutForm5" checked>
                <label class="form-check-label" for="checkoutForm5">
                  Credit Card
                </label>
              </div>
  
              <div class="row mb-4">
                <div class="col">
                  <div class="form-outline">
                    <input type="text" id="formNameOnCard" class="form-control" placeholder="Name" required/>
                    <label class="form-label" for="formNameOnCard">Name on card</label>
                  </div>
                </div>
                <div class="col">
                  <div class="form-outline">
                    <!-- <input type="text" id="formCardNumber" class="form-control" pattern="^[0-9]{16}$" /> -->
                    <input type="text" id="formCardNumber" class="form-control" required/>
                    <label class="form-label" for="formCardNumber">Credit card number</label>
                  </div>
                </div>
              </div>
  
              <div class="row mb-4">
                <div class="col">
                  <div class="form-outline">
                    <input type="date" id="formExpiration" class="form-control" required/>
                    <label class="form-label" for="formExpiration">Expiration</label>
                  </div>
                </div>
                <div class="col">
                  <div class="form-outline">
                    <!-- <input type="text" id="formCVV" class="form-control" pattern="^[0-9]{3,4}$"/> -->
                    <input type="text" id="formCVV" class="form-control" required/>
                    <label class="form-label" for="formCVV">CVV</label>
                  </div>
                </div>
              </div>
              <form action="{{ url_for('confirmationpage.confirmation')}}" method="post">
                <a onClick="confirmOrder()" class="w3-large w3-bar-item w3-button" style="background-color: #a17a83; color:white;">
                  <!-- <button class="btn btn-lg btn-block" style="background-color:#a17a83; color:white" type="button">
                      Place Order
                  </button> -->
                  Place Order
                </a>
              </form>
              <script>

                function validateForm() {
                        // Check if all required fields are filled
                        var inputs = document.querySelectorAll('input[required]');
                        for (var i = 0; i < inputs.length; i++) {
                            if (!inputs[i].value) {
                                alert('Please fill out all  fields.');
                                return false;
                            }
                        }
                        return true;
                    }

                function confirmOrder() {
                    if (validateForm()) {
                      if (confirm('Are you sure you want to place this order?')) {

                          // window.location.href = "/confirmation";
                          document.getElementsByTagName("form")[0].submit();
                      } 
                    }
                  }
              
              </script>
            </form>
          </div>
        </div>
      </div>
  
      <div class="col-md-4 mb-4">
        <div class="card mb-4">
          <div class="card-header py-3" style="background-color: #a17a83;">
            <h5 class="mb-0" style="color:white">Summary</h5>
          </div>
          <div class="card-body" style="background-color:rgb(248, 246, 246)">
            <ul class="list-group list-group-flush" style="background-color:rgb(248,246,246)">
              <li class="list-group-item d-flex justify-content-between align-items-center border-0 px-0 pb-0"  style="background-color:rgb(248,246,246)">
                Subtotal
                <span>{{ subtotal }}</span>
              </li>
              <li class="list-group-item d-flex justify-content-between align-items-center border-0 px-0 pb-0"  style="background-color:rgb(248,246,246)">
                Shipping
                <span>$13.99</span>
              </li>
              <li class="list-group-item d-flex justify-content-between align-items-center px-0"  style="background-color:rgb(248,246,246)">
                Tax
                <span>$7.89</span>
              </li>
              <li class="list-group-item d-flex justify-content-between align-items-center border-0 px-0 mb-3"  style="background-color:rgb(248,246,246)">
                <div>
                  <strong>Total amount</strong>
                </div>
                <span><strong>{{ total }}</strong></span>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- Credit card form -->
</div>
</body>
</html>
{% endblock %}
